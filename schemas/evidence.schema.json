{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Evidence",
  "description": "A piece of evidence backing a claim in an article",
  "type": "object",
  "properties": {
    "id": {
      "type": "string",
      "description": "Unique identifier (UUID)"
    },
    "article_id": {
      "type": "string",
      "description": "ID of the article this evidence backs"
    },
    "claim_path": {
      "type": "string",
      "description": "JSON Pointer (RFC 6901) to the claim in the article (e.g., '/title', '/author_hint', '/published_at')"
    },
    "evidence_type": {
      "type": "string",
      "enum": ["meta_tag", "json_ld", "extracted", "fetched_content"],
      "description": "Where this evidence came from"
    },
    "source_url": {
      "type": "string",
      "format": "uri",
      "description": "URL where this evidence was found"
    },
    "extraction_method": {
      "type": ["string", "null"],
      "description": "Method used to extract this evidence (e.g., 'trafilatura', 'meta_og:title')"
    },
    "extracted_text": {
      "type": "string",
      "maxLength": 800,
      "description": "The actual evidence content (short snippet, max 800 chars)"
    },
    "confidence": {
      "type": "number",
      "minimum": 0.0,
      "maximum": 1.0,
      "description": "Confidence score (0.0-1.0)"
    },
    "metadata": {
      "type": "object",
      "description": "Extra context (JSON object, arbitrary keys/values)"
    },
    "retrieved_at": {
      "type": "string",
      "format": "date-time",
      "description": "When this evidence was collected"
    },
    "extractor_version": {
      "type": ["string", "null"],
      "description": "Version of extractor tool (e.g., 'trafilatura@1.9.0', 'jsonld@1.0')"
    },
    "input_ref": {
      "type": ["string", "null"],
      "description": "Reference to extraction input location (CSS selector, header name, JSON-LD path, etc.)"
    },
    "snippet_max_chars_applied": {
      "type": ["integer", "null"],
      "description": "Truncation limit applied at extraction time"
    },
    "created_at": {
      "type": "string",
      "format": "date-time",
      "description": "When this evidence was recorded in system"
    },
    "run_id": {
      "type": "string",
      "description": "ID of the run that added this evidence (for rollback)"
    }
  },
  "required": [
    "id",
    "article_id",
    "claim_path",
    "evidence_type",
    "source_url",
    "extracted_text",
    "retrieved_at",
    "created_at",
    "run_id"
  ],
  "additionalProperties": false
}
